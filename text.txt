Next.js 15 Route Handler Migration Guide
Issue: Dynamic Route Parameters Type Error
In Next.js 15, all dynamic route parameters are now Promises. You need to update all route handlers in directories with [...] brackets.
Files to Check and Fix
Look for all files in these patterns:

app/api/*/[id]/*/route.ts
app/api/*/[slug]/*/route.ts
app/api/*/[...params]/*/route.ts

Before (Next.js 14 style):
typescriptexport async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  const id = params.id; // ❌ This will cause TypeScript error
}
After (Next.js 15 style):
typescriptexport async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  const resolvedParams = await params;
  const id = resolvedParams.id; // ✅ Correct way
}
Common Route Files to Update:

User Routes:

app/api/users/[id]/route.ts
app/api/users/[id]/assign-card/route.ts
app/api/users/[id]/update/route.ts


Listing Routes:

app/api/listings/[id]/route.ts
app/api/temporary-listings/[id]/approve/route.ts
app/api/flat-listings/[id]/route.ts


Admin Routes:

app/api/admin/*/[id]/*/route.ts



Step-by-Step Fix Process:
1. Find All Dynamic Routes
bashfind app/api -name "route.ts" -path "*/\[*\]/*"
2. Update Each File
For each file, change:

Function parameter type: { params: { id: string } } → { params: Promise<{ id: string }> }
Parameter access: params.id → (await params).id

3. Template for Different HTTP Methods:
typescript// GET, POST, PUT, DELETE, PATCH - all follow same pattern
export async function METHOD_NAME(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  const resolvedParams = await params;
  const id = resolvedParams.id;
  
  // Rest of your logic...
}
4. For Multiple Parameters:
typescript{ params }: { params: Promise<{ id: string; slug: string }> }
5. For Catch-All Routes:
typescript{ params }: { params: Promise<{ slug: string[] }> }
Quick Fix Script
You can create a script to find and list all files that need updating:
bash# Find all route files in dynamic directories
grep -r "params.*{.*}" app/api/*/\[*\]/*/route.ts
Verification
After making changes, run:
bashnpm run build
All TypeScript errors related to route parameters should be resolved.
Common Mistakes to Avoid:

❌ Forgetting to await params
❌ Not updating the type to Promise<{...}>
❌ Mixing old and new syntax in the same project
❌ Not handling the promise properly

Additional Notes:

This change was made to support async operations in route parameters
All existing functionality remains the same, just with async parameter access
This affects only dynamic route segments (folders with [...] brackets